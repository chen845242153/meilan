//
// Created by Administrator on 2020/8/28.
//




/***********************************************************************
*                               include files
************************************************************************
*/
#include "fileOperate.h"
#include "../sensorCallback.h"

/***********************************************************************
*                               macro define
************************************************************************
*/
/***********************************************************************
*                               my type
************************************************************************
*/
/***********************************************************************
*                               extern variable
************************************************************************
*/

/***********************************************************************
*                               extern function
************************************************************************
*/

/***********************************************************************
*                               global variable
************************************************************************
*/

/***********************************************************************
*                               global function
************************************************************************
*/

/***********************************************************************
*                               static variable
************************************************************************
*/
static uint32_t mFileSize;
static uint32_t mFilePos;

/***********************************************************************
*                               static function
************************************************************************
*/

/***********************************************************************
*                                   end
************************************************************************
*/
/*************************************************************************   
**	function name:	
**	description:	                    
**	input para:		
**                  	
**	return:			                                       
**************************************************************************/
void file_write(void *p, uint32_t length) {
    if (mFilePos == mFileSize) {
        fitAddElements(p, length);
    } else {
        fitModifyElements(p, mFilePos, length);
    }
    mFileSize += length;
    mFilePos += length;
}

/*************************************************************************   
**	function name:	
**	description:	                    
**	input para:		
**                  	
**	return:			                                       
**************************************************************************/
void file_init(void) {
    mFileSize = 0;
    mFilePos = 0;
}

/*************************************************************************   
**	function name:	
**	description:	                    
**	input para:		
**                  	
**	return:			                                       
**************************************************************************/
uint32_t file_seek(uint32_t pos) {
    mFilePos = pos;
}
/*************************************************************************   
**	function name:	
**	description:	                    
**	input para:		
**                  	
**	return:			                                       
**************************************************************************/
uint32_t file_size(void){
    return mFileSize;
}